<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üíñ Tarjeta 14 de Febrero | Bootcamp Edition</title>
  <style>
    :root{
      --bg1:#0b1220;
      --bg2:#160a1a;
      --card:#0f172aee;
      --ink:#e5e7eb;
      --muted:#94a3b8;
      --pink:#ff4fa6;
      --pink2:#ff86c8;
      --green:#22c55e;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 22px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background:
        radial-gradient(1200px 700px at 20% 10%, #2b1b42 0%, transparent 60%),
        radial-gradient(1000px 650px at 90% 30%, #3a1240 0%, transparent 55%),
        radial-gradient(900px 600px at 40% 90%, #0b2a3a 0%, transparent 55%),
        linear-gradient(140deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      overflow-x:hidden;
    }

    .wrap{
      width:min(980px, 100%);
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:18px;
      align-items:stretch;
    }

    @media (max-width: 860px){
      .wrap{grid-template-columns:1fr; }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .left{
      padding:22px 22px 18px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      width:fit-content;
      background: rgba(255,79,166,.12);
      border:1px solid rgba(255,79,166,.25);
      color:#ffd1e7;
      font-size:13px;
    }
    .badge .dot{
      width:8px;height:8px;border-radius:50%;
      background: linear-gradient(180deg,var(--pink),var(--pink2));
      box-shadow: 0 0 0 3px rgba(255,79,166,.15);
    }

    h1{
      margin:0;
      font-size: clamp(24px, 3.6vw, 40px);
      line-height:1.05;
      letter-spacing:-.02em;
    }
    p{margin:0; color:var(--muted); line-height:1.5}

    .imgBox{
      margin-top:8px;
      border-radius: 18px;
      background: rgba(255,255,255,.03);
      border: 1px solid rgba(255,255,255,.08);
      padding:16px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      overflow:hidden;
    }

    .imgBox::before{
      content:"";
      position:absolute;
      inset:-60px;
      background: radial-gradient(circle at 30% 20%, rgba(255,79,166,.25), transparent 45%),
                  radial-gradient(circle at 70% 80%, rgba(34,197,94,.18), transparent 40%);
      filter: blur(8px);
      opacity:.85;
      pointer-events:none;
    }

    .doge{
      width:min(420px, 100%);
      max-height:320px;
      object-fit:contain;
      transform: translateY(2px);
      filter: drop-shadow(0 18px 28px rgba(0,0,0,.45));
      position:relative;
      z-index:1;
      user-select:none;
      -webkit-user-drag:none;
    }

    .hint{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-top:10px;
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-size: 13px;
    }

    .kbd{
      font-size:12px;
      color:#dbeafe;
      border:1px solid rgba(219,234,254,.22);
      background: rgba(30,58,138,.18);
      padding:3px 8px;
      border-radius:999px;
      white-space:nowrap;
    }

    /* Right side */
    .right{
      padding:22px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .panelTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .panelTitle h2{
      margin:0;
      font-size: 18px;
      letter-spacing:-.01em;
    }

    .fortuneCard{
      border-radius: 18px;
      padding:16px 16px 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(15,23,42,.65);
      position:relative;
      overflow:hidden;
      min-height: 190px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:10px;
    }

    .fortuneCard::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(500px 240px at 20% 20%, rgba(255,79,166,.20), transparent 55%),
                  radial-gradient(380px 240px at 80% 70%, rgba(34,197,94,.13), transparent 55%);
      opacity:.95;
      pointer-events:none;
    }

    .lollipopStage{
      display:flex;
      align-items:center;
      justify-content:center;
      min-height: 160px;
      position:relative;
      z-index:1;
    }

    .lollipop{
      width: 120px;
      height: 120px;
      position:relative;
      transform: translateY(8px) scale(1);
      transition: transform .25s ease;
      cursor:pointer;
      user-select:none;
    }

    .lollipop:active{ transform: translateY(10px) scale(.98); }

    .heart{
      position:absolute;
      inset:0;
      border-radius: 18px;
      transform: rotate(45deg);
      background: linear-gradient(180deg, #ffb2d8, #ff4fa6);
      box-shadow: 0 18px 26px rgba(255,79,166,.20);
    }
    .heart::before,
    .heart::after{
      content:"";
      position:absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: inherit;
      top:-50%;
      left:0;
    }
    .heart::after{
      top:0; left:-50%;
    }

    .stick{
      position:absolute;
      left:50%;
      top:104px;
      width: 14px;
      height: 95px;
      transform: translateX(-50%);
      background: linear-gradient(180deg, #ffd7e9, #ffb2d8);
      border-radius: 999px;
      box-shadow: 0 10px 22px rgba(0,0,0,.25);
    }

    .sparkle{
      position:absolute;
      inset:-18px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.55), transparent 30%),
                  radial-gradient(circle at 70% 55%, rgba(255,255,255,.35), transparent 28%),
                  radial-gradient(circle at 40% 80%, rgba(255,255,255,.35), transparent 30%);
      opacity:.45;
      filter: blur(1px);
      pointer-events:none;
    }

    .fortuneText{
      position:relative;
      z-index:1;
      text-align:center;
      padding: 0 8px;
      font-size: 16px;
      line-height:1.45;
      color: #f8fafc;
      min-height: 52px;
      transition: opacity .2s ease, transform .2s ease;
    }

    .fortuneMeta{
      position:relative;
      z-index:1;
      text-align:center;
      font-size: 12.5px;
      color: rgba(148,163,184,.95);
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 8px;
      position:relative;
      z-index:1;
    }

    button{
      border:0;
      border-radius: 14px;
      padding: 12px 14px;
      font-size: 14px;
      color: var(--ink);
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      cursor:pointer;
      transition: transform .12s ease, background .2s ease, border-color .2s ease;
    }
    button:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.11);
      border-color: rgba(255,255,255,.18);
    }
    .primary{
      background: linear-gradient(180deg, rgba(255,79,166,.95), rgba(255,134,200,.92));
      border-color: rgba(255,79,166,.35);
      color:#2b0a1b;
      font-weight:600;
    }
    .primary:hover{ background: linear-gradient(180deg, rgba(255,79,166,1), rgba(255,134,200,1)); }

    .success{
      background: rgba(34,197,94,.14);
      border-color: rgba(34,197,94,.35);
      color:#dcfce7;
    }

    .tiny{
      font-size: 12px;
      padding: 9px 12px;
      border-radius: 999px;
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(15,23,42,.92);
      border:1px solid rgba(255,255,255,.12);
      color: #e2e8f0;
      padding: 10px 14px;
      border-radius: 999px;
      box-shadow: 0 16px 40px rgba(0,0,0,.35);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease, transform .25s ease;
      font-size: 13px;
      z-index: 9999;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-4px);
    }

    /* Opening animation */
    .pop{
      animation: pop .35s ease;
    }
    @keyframes pop{
      0%{ transform: translateY(8px) scale(.96); }
      60%{ transform: translateY(4px) scale(1.03); }
      100%{ transform: translateY(8px) scale(1); }
    }

    .fadeUp{
      animation: fadeUp .28s ease;
    }
    @keyframes fadeUp{
      from{ opacity:0; transform: translateY(6px); }
      to{ opacity:1; transform: translateY(0); }
    }

    /* Confetti canvas */
    canvas#confetti{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9998;
    }

    .footerNote{
      margin-top:auto;
      color: rgba(148,163,184,.9);
      font-size: 12.5px;
      line-height:1.4;
    }

    .linkBox{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      padding: 12px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
    }
    .linkBox code{
      color:#e2e8f0;
      font-size:12px;
      opacity:.9;
      word-break:break-all;
    }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>

  <main class="wrap">
    <!-- LEFT -->
    <section class="card left">
      <div class="badge"><span class="dot"></span> Bootcamp ‚Ä¢ 14 de febrero ‚Ä¢ versi√≥n meme üíò</div>

      <h1>Feliz 14 üíñ<br/>¬°Tarjeta para el team del bootcamp!</h1>

      <p>
        Abre la <strong>paleta de coraz√≥n rosa</strong> y te saldr√° un mensaje random
        (tipo galleta de la fortuna, pero con vibra de <em>‚Äúya casi compila‚Äù</em>).
      </p>

      <div class="imgBox">
        <img class="doge" src="assets/doge-paletas.png" alt="Doge con paletas de coraz√≥n" />
      </div>

      <div class="hint">
        Tip: puedes abrirla todas las veces que quieras ‚ú®
        <span class="kbd">Click en la paleta</span>
      </div>
    </section>

    <!-- RIGHT -->
    <section class="card right">
      <div class="panelTitle">
        <h2>üç≠ Paleta de la Fortuna</h2>
        <button class="tiny" id="btnNew">Otra frase</button>
      </div>

      <div class="fortuneCard" aria-live="polite">
        <div class="lollipopStage">
          <div class="lollipop" id="lollipop" role="button" aria-label="Abrir paleta de la fortuna" tabindex="0">
            <div class="sparkle"></div>
            <div class="heart"></div>
            <div class="stick"></div>
          </div>
        </div>

        <div class="fortuneText" id="fortuneText">Haz click en la paleta para revelar tu frase üíó</div>
        <div class="fortuneMeta" id="fortuneMeta">Consejo: comp√°rtela con tu squad ü§ù</div>

        <div class="actions">
          <button class="primary" id="btnOpen">Abrir paleta</button>
          <button class="success" id="btnShare">Compartir</button>
          <button id="btnCopy">Copiar link</button>
        </div>
      </div>

      <div class="linkBox">
        <div>
          <div style="color: rgba(148,163,184,.9); font-size:12px; margin-bottom:6px;">Link para compartir:</div>
          <code id="shareLink"></code>
        </div>
      </div>

      <p class="footerNote">
        Hecha con üíò para el bootcamp. Tip: s√∫bela a GitHub Pages / Netlify / Vercel y listo para compartir.
      </p>
    </section>
  </main>

  <div class="toast" id="toast">Copiado ‚úÖ</div>

  <script>
    // ‚úÖ Frases random (puedes agregar m√°s)
    const PHRASES = [
      "Tu crush es el bug‚Ä¶ pero t√∫ eres el fix. üíñ",
      "Hoy compilas a la primera (si no, reinicia y finge seguridad). üòå",
      "El amor es como Git: sin commit‚Ä¶ no hay futuro. üß†",
      "Te mereces alguien que te haga merge sin conflictos. ü´∂",
      "Hoy la vida te dice: ‚ÄòApproved ‚úÖ‚Äô",
      "Tu energ√≠a hoy: README bien documentado. ‚ú®",
      "Si te ghostean, t√∫ haz ‚Äòdeploy‚Äô en otra nube. ‚òÅÔ∏è",
      "Eres el main character‚Ä¶ y tambi√©n el main branch. üëë",
      "Que tus errores sean 404 y no de amor. üò≠",
      "Eres tan brillante que hasta tu c√≥digo tiene glitter. ‚ú®",
      "Hoy se vale: break + chocolate + terapia con memes. üç´",
      "Tu debug de hoy: respiraci√≥n profunda y caf√©. ‚òï",
      "Tu match ideal: alguien que no te pida ‚Äòcambios urgentes‚Äô a las 6pm. ü´†",
      "Que el √∫nico ‚Äòcrash‚Äô hoy sea de risas. üòÇ",
      "Te deseo un amor estable‚Ä¶ tipo versi√≥n LTS. üß∑",
      "Hoy te toca suerte: 0 warnings, 0 toxicidad. üåø",
      "Eres la excepci√≥n que s√≠ quiero atrapar. (catch) üíò",
      "Hoy tu coraz√≥n hace ‚Äòpush‚Äô sin miedo. üöÄ",
      "Tu vibe: ‚ÄòIt works on my machine‚Äô, pero en rom√°ntico. üñ•Ô∏è",
      "Que tu d√≠a est√© lleno de ‚Äògreen checks‚Äô ‚úÖ‚úÖ‚úÖ"
    ];

    // --- Elements
    const lollipop = document.getElementById("lollipop");
    const btnOpen = document.getElementById("btnOpen");
    const btnNew = document.getElementById("btnNew");
    const btnShare = document.getElementById("btnShare");
    const btnCopy = document.getElementById("btnCopy");
    const fortuneText = document.getElementById("fortuneText");
    const fortuneMeta = document.getElementById("fortuneMeta");
    const toast = document.getElementById("toast");
    const shareLinkEl = document.getElementById("shareLink");

    // --- Share link
    const shareURL = window.location.href;
    shareLinkEl.textContent = shareURL;

    // --- Random phrase, avoiding immediate repeat
    let lastIndex = -1;

    function pickPhrase(){
      if (PHRASES.length === 1) return PHRASES[0];
      let idx;
      do {
        idx = Math.floor(Math.random() * PHRASES.length);
      } while (idx === lastIndex);
      lastIndex = idx;
      return PHRASES[idx];
    }

    function revealPhrase(){
      const phrase = pickPhrase();
      fortuneText.textContent = phrase;
      fortuneMeta.textContent = "Paleta abierta üç≠ ‚Ä¢ Vuelve a abrir para otra frase";

      // animate
      lollipop.classList.remove("pop");
      void lollipop.offsetWidth;
      lollipop.classList.add("pop");

      fortuneText.classList.remove("fadeUp");
      void fortuneText.offsetWidth;
      fortuneText.classList.add("fadeUp");

      fireConfetti();
    }

    // --- Toast
    let toastTimer = null;
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toast.classList.remove("show"), 1600);
    }

    // --- Share
    async function shareCard(){
      const text = "üíñ Tarjeta 14 de Febrero (Bootcamp Edition): abre la paleta de la fortuna üç≠";
      const data = { title: document.title, text, url: shareURL };

      if (navigator.share) {
        try {
          await navigator.share(data);
        } catch (e) {
          // user cancelled or error
        }
      } else {
        // fallback: copy link
        await copyLink();
        showToast("Tu navegador no soporta compartir. Link copiado ‚úÖ");
      }
    }

    async function copyLink(){
      try {
        await navigator.clipboard.writeText(shareURL);
        showToast("Link copiado ‚úÖ");
      } catch (e) {
        // Fallback viejo
        const tmp = document.createElement("textarea");
        tmp.value = shareURL;
        document.body.appendChild(tmp);
        tmp.select();
        document.execCommand("copy");
        tmp.remove();
        showToast("Link copiado ‚úÖ");
      }
    }

    // --- Events
    lollipop.addEventListener("click", revealPhrase);
    lollipop.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") revealPhrase();
    });

    btnOpen.addEventListener("click", revealPhrase);
    btnNew.addEventListener("click", revealPhrase);
    btnShare.addEventListener("click", shareCard);
    btnCopy.addEventListener("click", copyLink);

    // --- Confetti (ligero, sin librer√≠as)
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let confettiPieces = [];
    let animId = null;

    function resizeCanvas(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
      ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    function fireConfetti(){
      const count = 120;
      const w = window.innerWidth;
      const h = window.innerHeight;

      const originX = w * (0.65); // cerca de la paleta (lado derecho)
      const originY = h * (0.38);

      const shapes = ["rect","circle"];
      for (let i=0;i<count;i++){
        confettiPieces.push({
          x: originX + (Math.random()*40 - 20),
          y: originY + (Math.random()*20 - 10),
          vx: (Math.random()*6 - 3),
          vy: (Math.random()*-8 - 2),
          g: 0.18 + Math.random()*0.10,
          r: 2 + Math.random()*4,
          rot: Math.random()*Math.PI,
          vr: (Math.random()*0.25 - 0.12),
          life: 90 + Math.random()*40,
          shape: shapes[Math.floor(Math.random()*shapes.length)],
          // colores sin ‚Äúhardcode‚Äù espec√≠fico: variaci√≥n rosa/verde/blanco
          c: [ "rgba(255,79,166,.95)", "rgba(255,134,200,.95)", "rgba(34,197,94,.9)", "rgba(255,255,255,.9)" ][Math.floor(Math.random()*4)]
        });
      }

      if (!animId) animateConfetti();
    }

    function animateConfetti(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      confettiPieces = confettiPieces.filter(p => p.life > 0);
      for (const p of confettiPieces){
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;
        p.life -= 1;

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.fillStyle = p.c;

        if (p.shape === "circle"){
          ctx.beginPath();
          ctx.arc(0,0,p.r,0,Math.PI*2);
          ctx.fill();
        } else {
          ctx.fillRect(-p.r, -p.r, p.r*2, p.r*1.4);
        }
        ctx.restore();
      }

      if (confettiPieces.length > 0){
        animId = requestAnimationFrame(animateConfetti);
      } else {
        cancelAnimationFrame(animId);
        animId = null;
      }
    }
  </script>
</body>
</html>
